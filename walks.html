<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Estudio de Caminata Aleatoria — Standalone</title>
  <style>
    /* Minimal, clean styles (no Tailwind required) */
    :root{
      --bg1:#eff6ff; --bg2:#eef2ff; --card:#fff; --muted:#6b7280;
      --accent:#2563eb; --good:#10b981; --danger:#ef4444; --glass:#f3f4f6;
    }
    html,body,#root{height:100%; margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{background:linear-gradient(135deg,var(--bg1),var(--bg2)); padding:24px; box-sizing:border-box;}
    .container{max-width:980px;margin:0 auto;}
    .card{background:var(--card); border-radius:12px; box-shadow:0 6px 24px rgba(16,24,40,0.06); padding:20px; margin-bottom:16px;}
    h1,h2,h3{margin:0 0 8px 0;}
    .muted{color:var(--muted);}
    input[type="text"]{width:100%; padding:10px;border:1px solid #d1d5db;border-radius:8px;box-sizing:border-box;}
    button{cursor:pointer;border:0;padding:10px 14px;border-radius:8px;font-weight:600;}
    .btn-primary{background:var(--accent);color:white;}
    .btn-green{background:var(--good);color:white;}
    .btn-gray{background:#374151;color:white;}
    .center{text-align:center;}
    .row{display:flex;gap:12px;align-items:center;}
    .col{display:flex;flex-direction:column;gap:8px;}
    .small{font-size:13px;color:#4b5563;}
    .grid{display:grid;gap:12px;}
    .controls{display:flex;flex-direction:column;align-items:center;gap:8px;}
    .arrow-btn{width:56px;height:56px;border-radius:10px;display:flex;align-items:center;justify-content:center;border:1px solid rgba(0,0,0,0.06);background:linear-gradient(180deg,#10b981,#059669);color:#fff;}
    .arrow-row{display:flex;gap:8px;}
    .list-compact{max-height:200px;overflow:auto;border-top:1px solid #e6e6e6;padding-top:8px;}
    .chip{display:inline-flex;align-items:center;padding:6px 8px;border-radius:999px;font-weight:600;}
    canvas{display:block;margin:0 auto;border-radius:8px;}
    .footer-space{height:32px;}
  </style>

  <!-- React + ReactDOM UMD (development) and Babel for JSX -->
  <script src="https://unpkg.com/react@18/umd/react.production.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.js"></script>
</head>
<body>
  <div id="root"></div>

  <!-- Component code (JSX compiled by Babel in-browser) -->
<script>
  const {
    useState,
    useEffect,
    useRef
  } = React;
  
  
  /* Tiny inline SVG icon components to replace lucide-react */
  const IconRotate = ({
    size = 18
  }) => /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    viewBox: "0 0 24 24",
    fill: "none",
    "aria-hidden": true
  }, /*#__PURE__*/React.createElement("path", {
    d: "M20 11a8.1 8.1 0 0 0-15.5-2M4 13v6h6",
    stroke: "currentColor",
    strokeWidth: "1.6",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }));
  
  const IconDatabase = ({
    size = 18
  }) => /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    viewBox: "0 0 24 24",
    fill: "none",
    "aria-hidden": true
  }, /*#__PURE__*/React.createElement("ellipse", {
    cx: "12",
    cy: "6",
    rx: "8",
    ry: "3",
    stroke: "currentColor",
    strokeWidth: "1.6"
  }), /*#__PURE__*/React.createElement("path", {
    d: "M4 6v6c0 1.657 3.582 3 8 3s8-1.343 8-3V6",
    stroke: "currentColor",
    strokeWidth: "1.6"
  }), /*#__PURE__*/React.createElement("path", {
    d: "M4 12v6c0 1.657 3.582 3 8 3s8-1.343 8-3v-6",
    stroke: "currentColor",
    strokeWidth: "1.6",
    opacity: "0.6"
  }));
  
  function RandomWalkGame() {
    // --- state
    const [stage, setStage] = useState('consent');
   // consent, input, instructions, walk, results
    const [name, setName] = useState('');
  
    const [consented, setConsented] = useState(false);
  
    const [position, setPosition] = useState({
      x: 0,
      y: 0
    });
  
    const [path, setPath] = useState([{
      x: 0,
      y: 0
    }]);
  
    const [stepCount, setStepCount] = useState(0);
  
    const [allWalks, setAllWalks] = useState([]);
  
    const [randomWalk, setRandomWalk] = useState([]);
  
    const [currentRound, setCurrentRound] = useState(1);
  
    const [showImport, setShowImport] = useState(false);
  
    const [isSaving, setIsSaving] = useState(false);
  
  
    // 3 rounds con historial + 3 rondas ciegas → 6 rondas totales
    const maxSteps = 50;
  
    const totalRounds = 6;
   // <-- ahora 6
    const blindStartRound = 4;
   // a partir de la ronda 4 se vuelve "ciega"
  
    // URL de Apps Script (si lo tienes configurado)
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwE4mbDhCdoFUQ8mp21lT8gyKE99LauMLB1A0ybuFgI544IOZo_a9HvVdAdaZSFAd1XiA/exec';
  
    const canvasRef = useRef(null);
  
  
    // cargar caminatas guardadas
    useEffect(() => {
      try {
        const stored = JSON.parse(localStorage.getItem('randomWalkData') || '[]');
  
        if (Array.isArray(stored)) setAllWalks(stored);
  
      } catch (e) {
        console.warn('No stored walks or invalid JSON');
  
      }
    }, []);
  
  
    // generador de caminata aleatoria (solo para comparar)
    const generateRandomWalk = () => {
      const walk = [{
        x: 0,
        y: 0
      }];
  
      let pos = {
        x: 0,
        y: 0
      };
  
      const directions = [{
        x: 0,
        y: -1
      }, {
        x: 0,
        y: 1
      }, {
        x: -1,
        y: 0
      }, {
        x: 1,
        y: 0
      }];
  
      for (let i = 0;
   i < maxSteps;
   i++) {
        const dir = directions[Math.floor(Math.random() * 4)];
  
        pos = {
          x: pos.x + dir.x,
          y: pos.y + dir.y
        };
  
        walk.push({
          ...pos
        });
  
      }
      return walk;
  
    };
  
  
    // ---- Renderizado del canvas -------------------------------------------------
    useEffect(() => {
      const canvas = canvasRef.current;
  
      if (!canvas) return;
  
      const ctx = canvas.getContext('2d');
  
      const scale = 20;
  
      const centerX = canvas.width / 2;
  
      const centerY = canvas.height / 2;
  
      ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  
      // grid
      ctx.strokeStyle = '#e5e7eb';
  
      ctx.lineWidth = 1;
  
      for (let i = -15;
   i <= 15;
   i++) {
        ctx.beginPath();
  
        ctx.moveTo(centerX + i * scale, 0);
  
        ctx.lineTo(centerX + i * scale, canvas.height);
  
        ctx.stroke();
  
        ctx.beginPath();
  
        ctx.moveTo(0, centerY + i * scale);
  
        ctx.lineTo(canvas.width, centerY + i * scale);
  
        ctx.stroke();
  
      }
  
      // ---- HISTORICAL WALKS (solo si NO estamos en modo ciego) -----------------
      const isBlind = currentRound >= blindStartRound;
  
      if (!isBlind) {
        allWalks.forEach(walk => {
          ctx.strokeStyle = 'rgba(100,116,139,0.18)';
  
          ctx.lineWidth = 2;
  
          ctx.beginPath();
  
          walk.path.forEach((p, i) => {
            const x = centerX + p.x * scale;
  
            const y = centerY + p.y * scale;
  
            if (i === 0) ctx.moveTo(x, y);
  else ctx.lineTo(x, y);
  
          });
  
          ctx.stroke();
  
        });
  
      }
  
      // random walk (solo en resultados)
      if (stage === 'results' && Array.isArray(randomWalk)) {
        ctx.strokeStyle = 'rgba(239,68,68,0.6)';
  
        ctx.lineWidth = 3;
  
        ctx.beginPath();
  
        randomWalk.forEach((p, i) => {
          const x = centerX + p.x * scale;
  
          const y = centerY + p.y * scale;
  
          if (i === 0) ctx.moveTo(x, y);
  else ctx.lineTo(x, y);
  
        });
  
        ctx.stroke();
  
      }
  
      // path del usuario
      ctx.strokeStyle = stage === 'results' ? '#3b82f6' : '#10b981';
  
      ctx.lineWidth = 3;
  
      ctx.beginPath();
  
      path.forEach((p, i) => {
        const x = centerX + p.x * scale;
  
        const y = centerY + p.y * scale;
  
        if (i === 0) ctx.moveTo(x, y);
  else ctx.lineTo(x, y);
  
      });
  
      ctx.stroke();
  
  
      // punto de posición actual
      if (path.length > 0) {
        const curr = path[path.length - 1];
  
        ctx.fillStyle = stage === 'results' ? '#3b82f6' : '#10b981';
  
        ctx.beginPath();
  
        ctx.arc(centerX + curr.x * scale, centerY + curr.y * scale, 6, 0, 2 * Math.PI);
  
        ctx.fill();
  
      }
  
      // punto central
      ctx.fillStyle = '#6b7280';
  
      ctx.beginPath();
  
      ctx.arc(centerX, centerY, 5, 0, 2 * Math.PI);
  
      ctx.fill();
  
    }, [path, allWalks, stage, randomWalk, currentRound]);
  
  
    // ---- Movimientos ------------------------------------------------------------
    const handleMove = (dx, dy) => {
      if (stepCount >= maxSteps || isSaving) return;
  
      const newPos = {
        x: position.x + dx,
        y: position.y + dy
      };
  
      setPosition(newPos);
  
      setPath(prev => {
        const nxt = [...prev, newPos];
  
        // si se alcanzó el máximo, finalizar
        if (nxt.length >= maxSteps) finishWalk(nxt);
  
        return nxt;
  
      });
  
      setStepCount(prev => prev + 1);
  
    };
  
  
    // ---- Finalizar caminata ------------------------------------------------------
    const finishWalk = async finalPath => {
      setIsSaving(true);
  
      const walkData = {
        name,
        round: currentRound,
        timestamp: new Date().toISOString(),
        path: finalPath
      };
  
  
      // actualizar almacenamiento local
      const updated = [...allWalks, walkData];
  
      setAllWalks(updated);
  
      try {
        localStorage.setItem('randomWalkData', JSON.stringify(updated));
  
      } catch (e) {}
  
      // intentar envío a Google Sheets
      try {
        await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded;
  charset=UTF-8'
          },
          body: new URLSearchParams({
            payload: JSON.stringify(walkData)
          }).toString()
        });
  
        console.log('Datos enviados a Google Sheets (intentado).');
  
      } catch (err) {
        console.warn('No se pudo enviar a Google Sheets:', err.message || err);
  
      }
      setIsSaving(false);
  
      setRandomWalk(generateRandomWalk());
  
      setStage('results');
  
    };
  
  
    // ---- Reiniciar todo ---------------------------------------------------------
    const reset = () => {
      setStage('consent');
  
      setName('');
  
      setConsented(false);
  
      setPosition({
        x: 0,
        y: 0
      });
  
      setPath([{
        x: 0,
        y: 0
      }]);
  
      setStepCount(0);
  
      setRandomWalk([]);
  
      setCurrentRound(1);
  
    };
  
  
    // ---- Avanzar a la siguiente ronda --------------------------------------------
    const nextRound = () => {
      // si vamos a entrar en la fase ciega, añadimos "(blind)" al nombre (una sola vez)
      const next = currentRound + 1;
  
      if (next === blindStartRound && !name.includes(' (blind)')) {
        setName(prev => prev + ' (blind)');
  
      }
      setPosition({
        x: 0,
        y: 0
      });
  
      setPath([{
        x: 0,
        y: 0
      }]);
  
      setStepCount(0);
  
      setRandomWalk([]);
  
      setCurrentRound(next);
  
      setStage('instructions');
  
    };
  
  
    // ---- Export / Import ---------------------------------------------------------
    const exportData = () => {
      const dataStr = JSON.stringify(allWalks, null, 2);
  
      const blob = new Blob([dataStr], {
        type: 'application/json'
      });
  
      const url = URL.createObjectURL(blob);
  
      const a = document.createElement('a');
  
      a.href = url;
  
      a.download = `datos_caminata_aleatoria_${new Date().toISOString().split('T')[0]}.json`;
  
      a.click();
  
      URL.revokeObjectURL(url);
  
    };
  
    const importData = e => {
      const file = e.target.files && e.target.files[0];
  
      if (!file) return;
  
      const reader = new FileReader();
  
      reader.onload = ev => {
        try {
          const imported = JSON.parse(ev.target.result);
  
          if (!Array.isArray(imported)) throw new Error('Formato inválido (se esperaba array)');
  
          setAllWalks(imported);
  
          localStorage.setItem('randomWalkData', JSON.stringify(imported));
  
          setShowImport(false);
  
          alert(`${imported.length} caminatas importadas exitosamente`);
  
        } catch (err) {
          alert('Error al importar datos. Asegúrate de que el archivo sea válido JSON de caminatas.');
  
          console.error(err);
  
        }
      };
  
      reader.readAsText(file);
  
    };
  
    const startWalk = () => {
      setPosition({
        x: 0,
        y: 0
      });
  
      setPath([{
        x: 0,
        y: 0
      }]);
  
      setStepCount(0);
  
      setStage('walk');
  
    };
  
  
    // ---- Controles de teclado ----------------------------------------------------
    useEffect(() => {
      if (stage !== 'walk') return;
  
      const handler = e => {
        if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
          e.preventDefault();
  
          if (e.key === 'ArrowUp') handleMove(0, -1);
  
          if (e.key === 'ArrowDown') handleMove(0, 1);
  
          if (e.key === 'ArrowLeft') handleMove(-1, 0);
  
          if (e.key === 'ArrowRight') handleMove(1, 0);
  
        }
      };
  
      window.addEventListener('keydown', handler);
  
      return () => window.removeEventListener('keydown', handler);
  
    }, [stage, stepCount, position, isSaving]);
  
  
    // ---- Helpers para resultados -------------------------------------------------
    const calculateDistance = p => {
      if (!Array.isArray(p) || p.length === 0) return '0.00';
  
      const final = p[p.length - 1] || {
        x: 0,
        y: 0
      };
  
      return Math.sqrt(final.x * final.x + final.y * final.y).toFixed(2);
  
    };
  
  
    // ----------------------------------------------------------------------------- 
    // -------------------------- UI POR ESTADO -----------------------------------
    // ----------------------------------------------------------------------------- 
  
    // ---------- Consentimiento ----------
    if (stage === 'consent') {
      return /*#__PURE__*/React.createElement("div", {
        className: "container"
      }, /*#__PURE__*/React.createElement("div", {
        className: "card"
      }, /*#__PURE__*/React.createElement("h1", null, "Estudio de Caminata Aleatoria"), /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 12
        },
        className: "card"
      }, /*#__PURE__*/React.createElement("h3", null, "Formulario de Consentimiento"), /*#__PURE__*/React.createElement("div", {
        className: "small",
        style: {
          marginTop: 8
        }
      }, /*#__PURE__*/React.createElement("p", null, /*#__PURE__*/React.createElement("strong", null, "Prop\xF3sito:"), " Recopilar datos sobre caminata humana aleatoria y compararla con caminatas verdaderamente aleatorias."), /*#__PURE__*/React.createElement("p", null, /*#__PURE__*/React.createElement("strong", null, "Procedimiento:"), " Har\xE1s 50 pasos usando flechas o botones;
   la caminata se almacenar\xE1 con tu nombre."), /*#__PURE__*/React.createElement("p", null, /*#__PURE__*/React.createElement("strong", null, "Almacenamiento:"), " El patr\xF3n se guarda localmente y se intenta enviar a Google Sheets si est\xE1 configurado."), /*#__PURE__*/React.createElement("p", null, /*#__PURE__*/React.createElement("strong", null, "Voluntario:"), " Puedes dejar de participar cuando quieras."))), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          alignItems: 'center',
          gap: 12,
          marginTop: 12
        }
      }, /*#__PURE__*/React.createElement("input", {
        id: "consentChk",
        type: "checkbox",
        checked: consented,
        onChange: e => setConsented(e.target.checked)
      }), /*#__PURE__*/React.createElement("label", {
        htmlFor: "consentChk",
        className: "muted"
      }, "He le\xEDdo y acepto participar en este estudio")), /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 12
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "btn-primary",
        style: {
          width: '100%'
        },
        onClick: () => consented && setStage('input'),
        disabled: !consented
      }, "Continuar")), !allWalks.length && !showImport && /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 10
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "btn-gray",
        style: {
          width: '100%'
        },
        onClick: () => setShowImport(true)
      }, "Importar Datos Previos (Solo Experimentador)")), showImport && /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 10
        }
      }, /*#__PURE__*/React.createElement("input", {
        type: "file",
        accept: ".json",
        onChange: importData
      }))));
  
    }
  
    // ---------- Entrada de datos ----------
    if (stage === 'input') {
      return /*#__PURE__*/React.createElement("div", {
        className: "container"
      }, /*#__PURE__*/React.createElement("div", {
        className: "card",
        style: {
          maxWidth: 560,
          margin: '0 auto'
        }
      }, /*#__PURE__*/React.createElement("h2", null, "Informaci\xF3n del Participante"), /*#__PURE__*/React.createElement("label", {
        style: {
          marginTop: 12
        },
        className: "small"
      }, "Tu Nombre"), /*#__PURE__*/React.createElement("input", {
        type: "text",
        value: name,
        onChange: e => setName(e.target.value),
        placeholder: "Ingresa tu nombre"
      }), /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 12
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "btn-primary",
        style: {
          width: '100%'
        },
        onClick: () => name.trim() && setStage('instructions'),
        disabled: !name.trim()
      }, "Siguiente"))));
  
    }
  
    // ---------- Instrucciones ----------
    if (stage === 'instructions') {
      const isBlind = currentRound >= blindStartRound;
  
      return /*#__PURE__*/React.createElement("div", {
        className: "container"
      }, /*#__PURE__*/React.createElement("div", {
        className: "card"
      }, /*#__PURE__*/React.createElement("h2", null, "Ronda ", currentRound, " de ", totalRounds, isBlind && ' (ciega)'), /*#__PURE__*/React.createElement("h3", null, "Instrucciones", isBlind && ' (ciegas)'), /*#__PURE__*/React.createElement("div", {
        className: "small",
        style: {
          marginTop: 8
        }
      }, /*#__PURE__*/React.createElement("p", null, "Comenzar\xE1s desde el centro y tomar\xE1s ", /*#__PURE__*/React.createElement("strong", null, "50 pasos"), " en cualquier direcci\xF3n (arriba/abajo/izq/der)."), /*#__PURE__*/React.createElement("p", null, /*#__PURE__*/React.createElement("strong", null, "\xA1S\xE9 lo m\xE1s aleatorio posible!")), currentRound > 1 && !isBlind && /*#__PURE__*/React.createElement("p", {
        style: {
          color: '#2563eb'
        }
      }, "Ver\xE1s las caminatas anteriores mientras te mueves."), isBlind && /*#__PURE__*/React.createElement("p", {
        style: {
          color: '#d97706'
        }
      }, "En esta fase no se muestran caminatas anteriores ni datos de otros participantes."), /*#__PURE__*/React.createElement("p", null, "Puedes usar:"), /*#__PURE__*/React.createElement("ul", {
        className: "small"
      }, /*#__PURE__*/React.createElement("li", null, "Las teclas de flecha"), /*#__PURE__*/React.createElement("li", null, "Los botones en pantalla"))), /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 12
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "btn-green",
        style: {
          width: '100%'
        },
        onClick: startWalk
      }, "Comenzar Caminata ", currentRound))));
  
    }
  
    // ---------- Caminata ----------
    if (stage === 'walk') {
      const isBlind = currentRound >= blindStartRound;
  
      return /*#__PURE__*/React.createElement("div", {
        className: "container"
      }, /*#__PURE__*/React.createElement("div", {
        className: "card"
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center'
        }
      }, /*#__PURE__*/React.createElement("h2", null, "Ronda ", currentRound, " de ", totalRounds, isBlind && ' (ciega)'), /*#__PURE__*/React.createElement("div", {
        className: "small"
      }, /*#__PURE__*/React.createElement("strong", null, "Pasos:"), " ", stepCount, " / ", maxSteps)), /*#__PURE__*/React.createElement("div", {
        className: "small",
        style: {
          marginTop: 6
        }
      }, "Usa las teclas de flecha o los botones. \xA1Intenta ser lo m\xE1s aleatorio posible!"), !isBlind && allWalks.length > 0 && /*#__PURE__*/React.createElement("div", {
        className: "small",
        style: {
          marginTop: 6,
          color: '#4b5563'
        }
      }, "Las l\xEDneas grises muestran caminatas anteriores."), isSaving && /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 6,
          color: '#2563eb'
        }
      }, "Guardando datos...")), /*#__PURE__*/React.createElement("div", {
        className: "card",
        style: {
          textAlign: 'center'
        }
      }, /*#__PURE__*/React.createElement("canvas", {
        ref: canvasRef,
        width: 600,
        height: 600
      })), /*#__PURE__*/React.createElement("div", {
        className: "card",
        style: {
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          gap: 12
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "controls"
      }, /*#__PURE__*/React.createElement("button", {
        className: "arrow-btn",
        onClick: () => handleMove(0, -1),
        disabled: isSaving,
        title: "Arriba"
      }, "\u2191"), /*#__PURE__*/React.createElement("div", {
        className: "arrow-row"
      }, /*#__PURE__*/React.createElement("button", {
        className: "arrow-btn",
        onClick: () => handleMove(-1, 0),
        disabled: isSaving,
        title: "Izquierda"
      }, "\u2190"), /*#__PURE__*/React.createElement("button", {
        className: "arrow-btn",
        onClick: () => handleMove(0, 1),
        disabled: isSaving,
        title: "Abajo"
      }, "\u2193"), /*#__PURE__*/React.createElement("button", {
        className: "arrow-btn",
        onClick: () => handleMove(1, 0),
        disabled: isSaving,
        title: "Derecha"
      }, "\u2192")))));
  
    }
  
    // ---------- Resultados ----------
    if (stage === 'results') {
      const isBlind = currentRound >= blindStartRound;
  
      const userDistance = calculateDistance(path);
  
      const randomDistance = calculateDistance(randomWalk);
  
      const avgDistance = allWalks.length > 0 ? (allWalks.reduce((s, w) => s + parseFloat(calculateDistance(w.path)), 0) / allWalks.length).toFixed(2) : '0.00';
  
      return /*#__PURE__*/React.createElement("div", {
        className: "container"
      }, /*#__PURE__*/React.createElement("div", {
        className: "card"
      }, /*#__PURE__*/React.createElement("h2", null, "Resultados", isBlind && ' (ciega)'), /*#__PURE__*/React.createElement("p", {
        className: "small"
      }, "As\xED se compara tu caminata con una caminata aleatoria y, cuando corresponde, con participantes previos."), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'grid',
          gridTemplateColumns: 'repeat(3,1fr)',
          gap: 12,
          marginTop: 12
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          background: '#eff6ff',
          padding: 10,
          borderRadius: 8
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "small"
      }, "Tu Distancia"), /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: 20,
          fontWeight: 700,
          color: '#2563eb'
        }
      }, userDistance)), /*#__PURE__*/React.createElement("div", {
        style: {
          background: '#fee2e2',
          padding: 10,
          borderRadius: 8
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "small"
      }, "Caminata Aleatoria"), /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: 20,
          fontWeight: 700,
          color: '#ef4444'
        }
      }, randomDistance)), /*#__PURE__*/React.createElement("div", {
        style: {
          background: '#f3f4f6',
          padding: 10,
          borderRadius: 8
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "small"
      }, "Promedio (Todos)"), /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: 20,
          fontWeight: 700,
          color: '#374151'
        }
      }, avgDistance))), /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 12,
          display: 'flex',
          gap: 8,
          alignItems: 'center'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          gap: 8,
          alignItems: 'center'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          width: 12,
          height: 12,
          background: '#2563eb',
          borderRadius: 4
        }
      }), /*#__PURE__*/React.createElement("span", {
        className: "small"
      }, "Tu Caminata")), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          gap: 8,
          alignItems: 'center'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          width: 12,
          height: 12,
          background: '#ef4444',
          borderRadius: 4
        }
      }), /*#__PURE__*/React.createElement("span", {
        className: "small"
      }, "Caminata Aleatoria")), !isBlind && /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          gap: 8,
          alignItems: 'center'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          width: 12,
          height: 12,
          background: '#9ca3af',
          borderRadius: 4
        }
      }), /*#__PURE__*/React.createElement("span", {
        className: "small"
      }, "Caminatas Anteriores")))), /*#__PURE__*/React.createElement("div", {
        className: "card"
      }, /*#__PURE__*/React.createElement("canvas", {
        ref: canvasRef,
        width: 600,
        height: 600
      })), !isBlind && /*#__PURE__*/React.createElement("div", {
        className: "card"
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center'
        }
      }, /*#__PURE__*/React.createElement("h3", {
        style: {
          display: 'flex',
          alignItems: 'center',
          gap: 8
        }
      }, /*#__PURE__*/React.createElement(IconDatabase, null), " Datos Recopilados (", allWalks.length, " caminatas)"), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          gap: 8
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "btn-gray",
        onClick: exportData
      }, /*#__PURE__*/React.createElement(IconDatabase, null), " Exportar"))), /*#__PURE__*/React.createElement("div", {
        className: "list-compact",
        style: {
          marginTop: 10
        }
      }, allWalks.map((walk, idx) => /*#__PURE__*/React.createElement("div", {
        key: idx,
        style: {
          display: 'flex',
          justifyContent: 'space-between',
          padding: '8px 0',
          borderBottom: '1px solid #eee'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          fontWeight: 600
        }
      }, walk.name, " (Ronda ", walk.round, ")"), /*#__PURE__*/React.createElement("div", {
        className: "small"
      }, "Dist: ", calculateDistance(walk.path), " | ", new Date(walk.timestamp).toLocaleString()))), !allWalks.length && /*#__PURE__*/React.createElement("div", {
        className: "small"
      }, "A\xFAn no hay caminatas registradas."))), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'grid',
          gap: 8
        }
      }, currentRound < totalRounds ? /*#__PURE__*/React.createElement("button", {
        className: "btn-primary",
        onClick: nextRound
      }, "Continuar a Ronda ", currentRound + 1, currentRound + 1 >= blindStartRound && ' (ciega)') : /*#__PURE__*/React.createElement("div", {
        style: {
          background: '#ecfdf5',
          borderLeft: '4px solid #10b981',
          padding: 10,
          borderRadius: 8
        }
      }, /*#__PURE__*/React.createElement("strong", null, "\xA1Gracias por completar las ", totalRounds, " rondas!")), /*#__PURE__*/React.createElement("button", {
        className: "btn-gray",
        onClick: () => {
          reset();
  
        }
      }, /*#__PURE__*/React.createElement(IconRotate, null), " Iniciar Nueva Sesi\xF3n de Participante")));
  
    }
    return null;
  
  }
  
  // Render
  const root = ReactDOM.createRoot(document.getElementById('root'));
  
  root.render(/*#__PURE__*/React.createElement(RandomWalkGame, null));
</script>
</body>
</html>
